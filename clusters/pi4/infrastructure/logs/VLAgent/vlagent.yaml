apiVersion: operator.victoriametrics.com/v1
kind: VLAgent
metadata:
  name: vlagent
  namespace: vm
spec:
  replicaCount: 1
#  resources:
#    requests:
#      cpu: "50m"
#      memory: "350Mi"
#    limits:
#      cpu: "500m"
#      memory: "850Mi"
  persistentVolumeClaimRetentionPolicy:
    whenDeleted: Delete
  storage:
    volumeClaimTemplate:
      spec:
        resources:
          requests:
            storage: 5Gi
  remoteWrite:
    - url: "http://vlinsert-dev-logs.vm.svc.cluster.local:9481/internal/insert"
      maxDiskUsage: 1GB
  remoteWriteSettings:
    # ~ 5GB in bytes
    maxBlockSize: 30MB